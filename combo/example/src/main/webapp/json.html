<!DOCTYPE html>
<html>

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
  <title>Template</title>
</head>

<body data-lift-content-id="main">
  <div id="main" data-lift="surround?with=default2;at=content">

    <h2>JSON Samples</h2>
    <nav aria-label="breadcrumb" role="navigation">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="index.html">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="interactive.html">Interactive Stuff</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">JSON Samples</li>
      </ol>
    </nav>

    <h4>Example 1</h4>
    <div data-lift="JsonCall">
      <p>Enter an addition question:</p>

      <div class="form-row">
        <div class="form-inline">
          <input id="x" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <label class="mr-sm-1">+</label>
          <input id="y" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <label class="mr-sm-1">=</label>
          <input id="z" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <button class="btn btn-primary form-control mb-1 mr-sm-1 mb-sm-1">Check</button>
        </div>
      </div>

    </div>

    <script type="text/javascript">
      // <![CDATA[
      function currentQuestion() {
        return {
          first: parseInt($('#x').val()),
          second: parseInt($('#y').val()),
          answer: parseInt($('#z').val())
        };
      }
      // ]]>
    </script>

    <hr>
    <h4>Example 2</h4>
    <div data-lift="Json.sample">
      <div id="jsonscript"></div>
      <div class="form-group">
        <textarea id="json_question" class="form-control" rows="8"></textarea>
      </div>
      <div class="form-group">
        <select id="json_select" class="form-control">
          <option value="show">Show</option>
          <option value="textile">Show in Textile</option>
          <option value="count">Count Characters</option>
          <option value="error">Show an error</option>
        </select>
      </div>
      <button class="json btn btn-primary">Click Me</button>
      <div id="json_result"></div>
    </div>

    <p>Here's the code:</p>

    <style type="text/css">
      /* <![CDATA[ */

      .function-name {
        /* font-lock-function-name-face */
        color: #0000ff;
      }

      .keyword {
        /* font-lock-keyword-face */
        color: #a020f0;
      }

      .string {
        /* font-lock-string-face */
        color: #bc8f8f;
      }

      .type {
        /* font-lock-type-face */
        color: #228b22;
      }

      .variable-name {
        /* font-lock-variable-name-face */
        color: #b8860b;
      }
      /* ]]> */
    </style>

    <pre>
<span class="keyword">class</span> <span class="type">Json</span> {
  <span class="keyword">object</span> <span class="variable-name">json</span> <span class="keyword">extends</span> <span class="type">JsonHandler</span> {
    <span class="keyword">def</span> <span class="function-name">apply</span>(<span class="variable-name">in</span>: <span class="type">Any</span>): <span class="type">JsCmd </span>=
    SetHtml(<span class="string">"json_result"</span>, in <span class="keyword">match</span> {
        <span class="keyword">case</span> <span class="type">JsonCmd</span>(<span class="string">"show"</span>, <span class="variable-name">_</span>, <span class="variable-name">p</span>: <span class="type">String</span>, <span class="variable-name">_</span>) =&gt; Text(p)
        <span class="keyword">case</span> <span class="type">JsonCmd</span>(<span class="string">"textile"</span>, <span class="variable-name">_</span>, <span class="variable-name">p</span>: <span class="type">String</span>, <span class="variable-name">_</span>) =&gt;
          TextileParser.toHtml(p, Empty)
        <span class="keyword">case</span> <span class="type">JsonCmd</span>(<span class="string">"count"</span>, <span class="variable-name">_</span>, <span class="variable-name">p</span>: <span class="type">String</span>, <span class="variable-name">_</span>) =&gt; Text(p.length+<span class="string">" Characters"</span>)
        <span class="keyword">case</span> <span class="variable-name">x</span> =&gt; &lt;b&gt;Problem... didn't handle JSON message {x}&lt;/b&gt;
      })
  }

  <span class="keyword">def</span> <span class="function-name">sample</span>(<span class="variable-name">in</span>: <span class="type">NodeSeq</span>): <span class="type">NodeSeq </span>=
  bind(<span class="string">"json"</span>, in,
       <span class="string">"script"</span> -&gt; Script(json.jsCmd),
       AttrBindParam(<span class="string">"onclick"</span>,
                     Text(json.call(ElemById(<span class="string">"json_select"</span>)~&gt;Value,
                                    ElemById(<span class="string">"json_question"</span>)~&gt;Value).toJsCmd),
                     <span class="string">"onclick"</span>))
}
</pre>


  </div>
</body>

</html>